<!DOCTYPE html>
<html lang="en" >

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head
         content must come *after* these tags -->
    <title>My Library App</title>
    
    <!-- jQuery 1.9.1 -->
    <script src="../bower_components/jquery/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Bootstrap JS -->
    <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <link href="styles/mystyles.css" rel="stylesheet">

    <link rel="icon" sizes="192x192" href="images/logo.png">  


    <script src="../bower_components/angular/angular.min.js"></script>
    
    

    
    
    <style>
      body{
            background-color: #FFFFFF;
        }
    </style>      

</head>
<!--  -->
<body ng-app="myApp" ng-controller="myCtrl">

    <!-- Add new book modal -->
    <div id="newbookModal"  class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title" style="text-align: center;">

                        <b style="color: blue;">Add new book</b>
                        
                </div>
                <div class="modal-body" style="text-align: center;">

                    <div class="row">
                        <div class="col-xs-12">
                            <h4 id="id_label_books" style="color: black;">Please, fill out the fields. They are required.</h4>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 20px;">

                        <div class="col-xs-4">
                            <label for="id_bookTitle"> Book Title </label>
                        </div>

                        <div class="col-xs-7 col-sm-4">
                            <input id="id_bookTitle" ng-model="title" type="text" class="form-control"  placeholder="Book title" autofocus >
                        </div>

                    </div>

                    <div class="row" style="margin-top: 20px;">

                        <div class="col-xs-4">
                            <label for="id_bookAuthor"> Book Author </label>
                        </div>

                        <div class="col-xs-7 col-sm-4">
                            <input id="id_bookAuthor" ng-model="author" type="text" class="form-control"  placeholder="Book Author">
                        </div>

                    </div>

                    <div class="row" style="margin-top: 20px;">

                        <div class="col-xs-4 col-xs-push-4">
                           <button id="btn-done" class="btn btn-md btn-success" ng-click="addBook()" style="width: 100%; display: none;" > Done </button>
                        </div>

                    </div>
                    
                    

                </div>
            </div>
        </div>
    </div>

   
    <nav class="navbar navbar-inverse navbar-fixed-top"><!-- Static navbar -->
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>

            </button>
            <a class="navbar-brand" href="http://www.fbadin.com">
              <img src="images/logo.png" height=40 style="margin-top: -10px;" >
            </a>

          </div>
          
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li id="home" ><a>
                <span class="glyphicon glyphicon-home" aria-hidden="true"></span> Home</a></li>
              </ul>

            <ul class="nav navbar-nav navbar-right">
                  
                  <li class="navbar-right">
                    <a>
                      <span class="glyphicon glyphicon-log-in">
                      
                      </span>
                      <b> Logout</b>
                    </a>
                  </li>
            </ul>
          </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container" >

        <ul class="breadcrumb" style="margin-top: 80px; background-color: #eee;" >
            <li class="active"><a href="">Home</a></li>
        </ul>

        <div class="row" style="margin-top: 20px;">

          <div class="col-xs-12 col-sm-4" >
              <a id="btn_add"   class="btn btn-lg btn-primary" style="width: 100%;" >
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add Book
              </a>
          </div>

          

        </div>

        <div class="jumbotron" style="background: white;">

            <div class="row">

                <div class="col-xs-12 col-sm-6" style="margin-top: -15px;">
                <!--  -->
                    <h2>Books Summary</h2>
                </div>

                <div class="col-xs-12 col-sm-5">
                    <input type="text" ng-model="search" class="form-control search_bar" placeholder="Search" />
                </div>

            </div>
            


            <div class="row" style="margin-top: 30px;" >
                
                <div id="book_scope" class="col-xs-12" ng-repeat="book in books | orderBy: myCtrl:orderby | filter: search ">

                    <div class="col-xs-12 col-sm-8" style="margin-top: 10px;">
                        <ul class="media-list">
                            <li class="media" >
                                <div class="media-left media-middle">
                                    <a href="#">
                                      <img class="media-object img-thumbnail"
                                       ng-src={{book.picture}} alt="Book Picture" style="max-width: 100px;">
                                    </a>
                                </div>
                                <div class="media-body">
                                    <h3 class="media-heading" style="color: black;">{{book.title}}
                                     
                                    <p style="margin-top: 10px;">{{book.author}}</p>
                                </div>
                            </li>
                        </ul>
                      </div>

                      <div class="col-sm-4" style="margin-top: 10px;">
                          
                          <button class="btn btn-lg btn-default" ng-click="removeBook($index)">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete
                          </button>
                      </div>


                </div>
            </div>

        </div>
    </div>

    <!-- footer -->
    <div class="container" style="margin-top: 15px;">
        <div class="jumbotron" style="background-color: #eee; color: #777; text-align: center; padding-top: 0px;
        padding-bottom: 0px;">
            <label style="font-size: 0.95rem;">Fernando Badin 2017. v 1.0.0</label>
        </div>
    </div>
       
    
    <script>
        
        var app = angular.module('myApp',[])
        .controller('myCtrl', function($scope){
              
              $scope.orderby = 'title'

              //list of books
              $scope.books =  [
                          {
                             title:'The Lord of the Rings',
                             author: 'J.R.R. Tolkien',
                             picture: 'images/lor.jpg'                             
                          },
                          {
                             title:'A Game of Thrones',
                             author: 'George R.R. Martin',
                             picture: 'images/got.jpg'
                             
                          },
                          
                      ];

              $scope.addBook = function(){

                  $scope.books.push({title:$scope.author, author:$scope.title, picture: 'images/book.jpeg'});

                  $scope.author = '';
                  $scope.title = '';

                  //$scope.$apply();  
              }

              //remove book from the scope        
              $scope.removeBook = function(index){
                  
                  $scope.books.splice(index, 1);
                    
              }
        });



        $(document).ready(function(){

            //shows the book modal to add new book
            $('#btn_add').click(function(event){
                
                $('#newbookModal').modal();
                
            });

            //manage the button and warning label
            function releaseLockDoneBtn(){
                
                var bookTitle = $('#id_bookTitle').val();
                var bookAuthor = $('#id_bookAuthor').val();

                if(bookTitle != '' && bookAuthor != ''){
                    $('#id_label_books').css('color', 'black');
                    $('#btn-done').show();
                } else {

                    if(bookTitle == '' && bookAuthor == ''){
                        $('#id_label_books').css('color', 'red');
                        $('#btn-done').hide();
                    } else {
                        $('#id_label_books').css('color', 'black');
                        $('#btn-done').hide();
                    } 
                } 
            }

            $('#id_bookTitle').keyup( function(){
                releaseLockDoneBtn();
            });

            $('#id_bookAuthor').keyup( function(){
                releaseLockDoneBtn();
            });

            //everything is ready to add
            $('#btn-done').click(function(){

                $('#btn-done').hide();
                
                $('#newbookModal').modal('hide');


            });



        }); 

    </script>



</body>

</html>
